<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
<title>Hammer Design — String Art</title>
<link rel="stylesheet" href="css/app.css"/>
<link rel="icon" href="data:,">
</head>
<body>
<header class="app-header">
  <h1>Hammer Design · String Art</h1>
  <nav>
    <button data-nav="1" aria-controls="screen-1">Home</button>
    <button data-nav="2" aria-controls="screen-2">Crop</button>
    <button data-nav="3" aria-controls="screen-3">Generate</button>
    <button data-nav="4" aria-controls="screen-4">Steps</button>
  </nav>
</header>

<main id="app">
  <section id="screen-1" class="screen" role="region" aria-label="Home">
    <div class="panel">
      <h2>New project</h2>
      <input id="e1-file" type="file" accept="image/*"/>
      <div class="hint">Pick an image to start.</div>
    </div>
    <div class="panel">
      <h2>My projects</h2>
      <ul id="project-list" class="list"></ul>
    </div>
  </section>

  <section id="screen-2" class="screen" role="region" aria-label="Crop">
    <div class="panel">
      <div class="canvas-wrap"><canvas id="crop-canvas" width="600" height="600" aria-label="Crop canvas"></canvas></div>
      <div class="row">
        <label>Zoom <input id="crop-zoom" type="range" min="0.2" max="5" step="0.01" value="1"/></label>
        <label>Rotate <input id="crop-rot" type="range" min="-180" max="180" step="0.1" value="0"/></label>
      </div>
      <div class="btns">
        <button id="crop-reset">Reset</button>
        <button id="crop-confirm" class="primary">Confirm</button>
      </div>
      <div class="hint">Pinch to zoom and drag to position. Circular mask is the final board.</div>
    </div>
  </section>

  <section id="screen-3" class="screen" role="region" aria-label="Generate">
    <div class="panel">
      <div class="row">
        <label>Pins <input id="p-pins" type="number" min="180" max="360" step="1" value="240"/></label>
        <label>Steps <input id="p-steps" type="number" min="1500" max="6000" step="50" value="3000"/></label>
      </div>
      <div class="row">
        <label>Min turn angle (deg) <input id="p-angle" type="number" min="10" max="25" step="1" value="15"/></label>
        <label>Min pin distance <input id="p-mindist" type="number" min="6" max="60" step="1" value="15"/></label>
      </div>
      <div class="row">
        <label>Fade <input id="p-fade" type="number" min="1" max="100" step="1" value="50"/></label>
        <label>Seed <input id="p-seed" type="number" step="1" value="1337"/></label>
      </div>
      <div class="row">
        <label>Thread width (px) <input id="p-width" type="number" min="0.6" max="1.2" step="0.1" value="0.8"/></label>
        <label>Alpha (0–255) <input id="p-alpha" type="number" min="10" max="255" step="1" value="180"/></label>
      </div>
      <div class="row">
        <label>Thread color
          <select id="p-color"><option value="#000000">Black</option><option value="#ffffff">White</option></select>
        </label>
        <label>Board
          <select id="p-board"><option value="white">White</option><option value="black">Black</option></select>
        </label>
      </div>

      <div class="btns">
        <button id="gen-start" class="primary">Generate</button>
        <button id="gen-pause">Pause</button>
        <button id="gen-resume">Resume</button>
        <button id="gen-cancel" class="danger">Cancel</button>
      </div>
      <div class="meter"><i id="gen-bar" style="width:0%"></i></div>
      <div id="gen-status" class="tiny">Idle</div>
      <div class="canvas-wrap"><canvas id="render-canvas" width="720" height="720" aria-label="Render preview"></canvas></div>
    </div>
  </section>

  <section id="screen-4" class="screen" role="region" aria-label="Steps">
    <div class="panel">
      <div class="e4-board-wrap">
        <div class="e4-export-row">
          <button id="exp-png" class="good">Export PNG</button>
          <button id="exp-svg">Export SVG</button>
          <button id="exp-csv">Export CSV</button>
          <button id="exp-json">Export JSON</button>
        </div>
        <div class="canvas-wrap"><canvas id="viewer-canvas" width="1440" height="1440" aria-label="Viewer"></canvas></div>
      </div>

      <div class="e4-progress">
        <button id="e4-first">First</button>
        <div class="e4-progress-center">
          <span id="e4-progress-label">0 / 0</span>
          <div class="e4-progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="0" aria-valuenow="0">
            <i id="e4-progress-fill"></i>
          </div>
        </div>
        <div class="e4-progress-actions">
          <button id="e4-last">Last</button>
          <button id="e4-step-jump">Adıma git</button>
        </div>
      </div>

      <div class="e4-step-cells">
        <div id="e4-prev-pin" class="e4-step-cell">
          <span class="e4-step-value" data-value></span>
          <span class="e4-step-placeholder" data-placeholder>—</span>
        </div>
        <div id="e4-current-pin" class="e4-step-cell">
          <span class="e4-step-value" data-value></span>
          <span class="e4-step-placeholder" data-placeholder>—</span>
        </div>
        <div id="e4-next-pin" class="e4-step-cell">
          <span class="e4-step-value" data-value></span>
          <span class="e4-step-placeholder" data-placeholder>—</span>
        </div>
      </div>

      <div class="e4-controls">
        <button id="e4-speed" class="e4-control-speed">Speed 3s</button>
        <div class="e4-control-group">
          <button id="e4-prev">Prev</button>
          <button id="e4-play" aria-pressed="false">Play</button>
          <button id="e4-next">Next</button>
        </div>
        <button id="e4-voice" class="e4-control-voice" aria-pressed="false">Voice Off</button>
      </div>
      <div class="tiny">© 2025 Hammer Design</div>
    </div>
  </section>
</main>

<script type="module">
  import * as State from './js/state.js';
  import * as UI from './js/ui.js';
  import './js/i18n.js';
  UI.mount();
  State.go(1);
</script>
</body>
</html>
